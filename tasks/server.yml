
bootstrap:
  provider: remote_script
  module: core
  script: scripts/bootstrap.sh
  roles: server-admin
  sudo: true
  args:
    - "@user"
    - /var/log/bootstrap.log
    - "@dev_build"
    - "@timezone"
  options:
    dev_build: false
    timezone: America/New_York

audit-bootstrap:
  provider: remote_command
  command: cat /var/log/bootstrap.log
  roles: server-admin
  sudo: true

audit-docker-compose:
  provider: remote_command
  command: docker-compose logs --tail=@count api
  roles: server-admin
  options:
    count: 100

update:
  provider: remote_command
  command: docker-compose pull && docker-compose up -d

restart:
  provider: remote_command
  command: docker-compose restart api
